<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"9RQY3CC5KU","apiKey":"dd51b14f02d2eb01b654e5b8d79688b8","indexName":"My Blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="AndroidManifest 必须在此文件中声明应用的所有组件 组件下可声明组件功能，如&lt;intent-filter&gt;等   该文件必须位于应用项目目录的根目录中 可在该文件中声明应用需要的任何用户权限或需要的硬件和软件功能。  应用资源项目 res&#x2F; 目录中的资源目录名称是固定的，不能随便取。 其他 res&#x2F; 子目录中的 XML 资源文件会根据 XML 文件名定义单个资源，而 va">
<meta property="og:type" content="article">
<meta property="og:title" content="Android学习笔记1">
<meta property="og:url" content="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/index.html">
<meta property="og:site_name" content="火箭快餐的博客">
<meta property="og:description" content="AndroidManifest 必须在此文件中声明应用的所有组件 组件下可声明组件功能，如&lt;intent-filter&gt;等   该文件必须位于应用项目目录的根目录中 可在该文件中声明应用需要的任何用户权限或需要的硬件和软件功能。  应用资源项目 res&#x2F; 目录中的资源目录名称是固定的，不能随便取。 其他 res&#x2F; 子目录中的 XML 资源文件会根据 XML 文件名定义单个资源，而 va">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/candlevista/resource/blob/master/797932661-1.png?raw=true">
<meta property="og:image" content="https://github.com/candlevista/resource/blob/master/5382839-2b055e1a2a643e19.webp?raw=true">
<meta property="og:image" content="https://github.com/candlevista/resource/blob/master/WX20230307-223810@2x.png?raw=true">
<meta property="article:published_time" content="2024-03-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-03T08:53:31.926Z">
<meta property="article:author" content="火箭快餐">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/candlevista/resource/blob/master/797932661-1.png?raw=true">

<link rel="canonical" href="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Android学习笔记1 | 火箭快餐的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">火箭快餐的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpeg">
      <meta itemprop="name" content="火箭快餐">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="火箭快餐的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Android学习笔记1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-25 00:00:00" itemprop="dateCreated datePublished" datetime="2024-03-25T00:00:00+08:00">2024-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-08-03 16:53:31" itemprop="dateModified" datetime="2025-08-03T16:53:31+08:00">2025-08-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="AndroidManifest"><a href="#AndroidManifest" class="headerlink" title="AndroidManifest"></a>AndroidManifest</h1><ul>
<li>必须在此文件中声明应用的所有组件<ul>
<li>组件下可声明组件功能，如<code>&lt;intent-filter&gt;</code>等</li>
</ul>
</li>
<li>该文件必须位于应用项目目录的根目录中</li>
<li>可在该文件中声明应用需要的任何用户权限或需要的硬件和软件功能。</li>
</ul>
<h1 id="应用资源"><a href="#应用资源" class="headerlink" title="应用资源"></a>应用资源</h1><p>项目 <code>res/</code> 目录中的资源目录名称是固定的，不能随便取。</p>
<p>其他 <code>res/</code> 子目录中的 XML 资源文件会根据 XML 文件名定义<strong>单个资源</strong>，而 <code>values/</code> 目录中的文件可描述<strong>多个资源</strong>。</p>
<p><code>res/</code>目录中的所有资源都在<code>R</code>类中有对应的资源ID</p>
<table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>animator&#x2F;</td>
<td>用于定义<a href="https://developer.android.google.cn/guide/topics/graphics/prop-animation">属性动画</a>的 XML 文件。</td>
</tr>
<tr>
<td>anim&#x2F;</td>
<td>用于定义<a href="https://developer.android.google.cn/guide/topics/graphics/view-animation#tween-animation">渐变动画</a>的 XML 文件。（属性动画也可保存在此目录中，但为了区分这两种类型，属性动画首选 <code>animator/</code> 目录。）</td>
</tr>
<tr>
<td>color&#x2F;</td>
<td>用于定义颜色状态列表的 XML 文件（并非具体颜色值）。请参阅<a href="https://developer.android.google.cn/guide/topics/resources/color-list-resource">颜色状态列表资源</a></td>
</tr>
<tr>
<td>drawable&#x2F;</td>
<td>位图文件（<code>.png</code>、<code>.9.png</code>、<code>.jpg</code>、<code>.gif</code>）或编译为以下可绘制对象资源子类型的 XML 文件：<br />* 位图文件<br />* 九宫格（可调整大小的位图）<br />* 状态列表<br />* 形状<br />* 动画可绘制对象<br />* 其他可绘制对象<br />请参阅 <a href="https://developer.android.google.cn/guide/topics/resources/drawable-resource">Drawable 资源</a>。</td>
</tr>
<tr>
<td>mipmap&#x2F;</td>
<td>APP存放的icon图片</td>
</tr>
<tr>
<td>layout&#x2F;</td>
<td>用于定义用户界面布局的 XML 文件。请参阅<a href="https://developer.android.google.cn/guide/topics/resources/layout-resource">布局资源</a>。</td>
</tr>
<tr>
<td>menu&#x2F;</td>
<td>用于定义应用菜单（如选项菜单、上下文菜单或子菜单）的 XML 文件。请参阅<a href="https://developer.android.google.cn/guide/topics/resources/menu-resource">菜单资源</a>。</td>
</tr>
<tr>
<td>raw&#x2F;</td>
<td>需以原始形式保存的任意文件。如要使用原始 <code>InputStream</code> 打开这些资源，请使用资源 ID（即 <code>R.raw.*filename*</code>）调用 <code>Resources.openRawResource()</code>。<br />但是，如需访问原始文件名和文件层次结构，则可以考虑将某些资源保存在 <code>assets/</code> 目录（而非 <code>res/raw/</code>）下。<code>assets/</code> 中的文件没有资源 ID，因此您只能使用 <code>AssetManager</code> 读取这些文件。</td>
</tr>
<tr>
<td>values&#x2F;</td>
<td>包含字符串、整型数和颜色等简单值的 XML 文件。<br />对于此目录中的文件，<code>&lt;resources&gt;</code> 元素的每个子元素均会定义一个资源。例如，<code>&lt;string&gt;</code> 元素会创建 <code>R.string</code> 资源，<code>&lt;color&gt;</code> 元素会创建 <code>R.color</code> 资源。<br />由于每个资源均使用自己的 XML 元素进行定义，因此您可以随意命名文件，并在某个文件中放入不同的资源类型。但是，您可能需要将独特的资源类型放在不同的文件中，使其一目了然。例如，对于可在此目录中创建的资源，下面给出了相应的文件名约定：<br />* arrays.xml：资源数组（<a href="https://developer.android.google.cn/guide/topics/resources/more-resources#TypedArray">类型数组</a>）。<br />* colors.xml：<a href="https://developer.android.google.cn/guide/topics/resources/more-resources#Color">颜色值</a>。<br />* dimens.xml：<a href="https://developer.android.google.cn/guide/topics/resources/more-resources#Dimension">尺寸值</a>。<br />* strings.xml：<a href="https://developer.android.google.cn/guide/topics/resources/string-resource">字符串值</a>。<br />* styles.xml：<a href="https://developer.android.google.cn/guide/topics/resources/style-resource">样式</a>。<br />请参阅<a href="https://developer.android.google.cn/guide/topics/resources/string-resource">字符串资源</a>、<a href="https://developer.android.google.cn/guide/topics/resources/style-resource">样式资源</a>和<a href="https://developer.android.google.cn/guide/topics/resources/more-resources">更多资源类型</a>。</td>
</tr>
<tr>
<td>xml&#x2F;</td>
<td>可在运行时通过调用 <code>Resources.getXML()</code> 读取的任意 XML 文件。各种 XML 配置文件（如<a href="https://developer.android.google.cn/guide/topics/search/searchable-config">可搜索配置</a>）都必须保存在此处。</td>
</tr>
<tr>
<td>font&#x2F;</td>
<td>带有扩展名的字体文件（如 <code>.ttf</code>、<code>.otf</code> 或 <code>.ttc</code>），或包含 <code>&lt;font-family&gt;</code> 元素的 XML 文件。如需详细了解作为资源的字体，请参阅 <a href="https://developer.android.google.cn/preview/features/fonts-in-xml">XML 中的字体</a>。</td>
</tr>
</tbody></table>
<p><strong>引用资源</strong></p>
<ul>
<li>@：代表引用资源</li>
<li>@*：代表引用系统的非public资源。</li>
<li>？：代表引用主题属性，例：<code>android:textColor=&quot;?android:textDisabledColor&quot; </code></li>
<li>@+：代表在创建或引用资源 。”+”表示在R.java中名为type的内部类中添加一条记录。如”@+id&#x2F;button”的含义是在R.java 文件中的id 这个静态内部类添加一条常量名为button。</li>
</ul>
<h2 id="点九图"><a href="#点九图" class="headerlink" title="点九图"></a>点九图</h2><ul>
<li><strong>左上的黑线（可以多条）</strong>：定义圆角矩形的可拉伸区域</li>
<li><strong>右下的黑线</strong>：定义圆角矩形中的文本区域</li>
</ul>
<h1 id="处理配置变更"><a href="#处理配置变更" class="headerlink" title="处理配置变更"></a>处理配置变更</h1><p>某些设备配置可能会在运行时发生变化（例如屏幕方向、键盘可用性，以及当用户启用多窗口模式时），导致Activity重启（先后调用 <code>onDestroy()</code> 和 <code>onCreate()</code>），有几种方式保存当前界面信息：</p>
<ul>
<li><p>onSaveInstanceState(Bundle outState)：用于存储页面信息，只能存储能序列化的数据；有多种情况会触发该回调（不代表页面已经被回收）：</p>
<ul>
<li><p>当用户按下HOME键时</p>
</li>
<li><p>长按HOME键，选择运行其他的程序时</p>
</li>
<li><p>按下电源按键（关闭屏幕显示）时</p>
</li>
<li><p>从activity A中启动一个新的activity时</p>
</li>
<li><p>屏幕方向切换时，例如从竖屏切换到横屏时</p>
</li>
</ul>
</li>
<li><p>ViewModel：方便使用但需要引入库</p>
</li>
<li><p>禁止在发生特定配置变更时自动重启Activity<code>android:configChanges</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.MyActivity&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|screenSize|screenLayout|keyboardHidden&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h1><h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><ul>
<li><p><code>&lt;include&gt;</code>：复用布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--复用title_include_user_info_white--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/news_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/title_include_user_info_white&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;merge /&gt;</code>：容器布局，当公共布局需要外嵌一个容器时可用，系统会忽略merge</p>
</li>
<li><p><code>gravity</code>是设置自身内部元素的对齐方式。 <code>layout_gravity</code>是设置自身相当于父容器的对齐方式。</p>
</li>
<li><p><code>visibility</code>是否显示控件：visible可见，invisible不可见但占位，gone隐藏</p>
</li>
<li><p><code>R.layout</code>必须唯一，<code>R.id</code>可以不唯一</p>
</li>
<li><p>字体单位用<code>sp</code>，控件设置大小单位用<code>dp</code></p>
</li>
<li><p><code>ImageView</code>常用填充方式scaleType：<code>CENTER_INSIDE</code>保持比例显示完整图，<code>CENTER_CROP</code>保持比例填满相框，<code>FIT_XY</code>变更比例填满相框</p>
</li>
<li><p>java代码设置布局</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LinearLayout是对应的父控件</span></span><br><span class="line">tv.setLayoutParams(<span class="keyword">new</span> <span class="title class_">LinearLayout</span>.LayoutParams(</span><br><span class="line">                        LinearLayout.LayoutParams.WRAP_CONTENT,</span><br><span class="line">                        LinearLayout.LayoutParams.WRAP_CONTENT</span><br><span class="line">                ));</span><br></pre></td></tr></table></figure>
</li>
<li><p>LinearLayout想要剩余空间均分，在填充区域添加view且设置权重为1，宽高为0dp</p>
</li>
<li><p><strong>View不能嵌套子控件，ViewGroup可以</strong>，但平时不会直接用，用各种Layout去嵌套子控件，ImageView属于VIew，不能嵌套</p>
</li>
<li><p>LinearLayout嵌套RecyclerView或者其他自适应宽高的view的同时还有普通view，RecyclerView设置权重为1，宽高为0dp可以防止将其他view顶出屏幕外（多个TextView并排一样适用）</p>
</li>
<li><p>LinearLayout会将多个并排TextView挤走，可以换成其他布局</p>
</li>
<li><p><code>ConstraintLayout</code>想让控件填充剩余空间，设置width为0dp</p>
</li>
<li><p>控件还没添加到页面前通过<code>getLayoutParams</code>获取没值；<code>getLayoutParams</code>获取的是控件自己在父布局的参数，不是自己的子控件参数（LinearLayout里嵌套RelativeLayout，RelativeLayout.getLayoutParams获取的是LinearLayout.LayoutParams对象）</p>
</li>
<li><p>实例化xml写的view：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> getLayoutInflater().inflate(R.layout.view_copy_phone, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.view_copy_phone, <span class="literal">null</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p><code>root</code>如果不传参会使根viewGroup自身的xml布局参数失效</p>
</li>
</ul>
<h2 id="LinearLayout-线性布局"><a href="#LinearLayout-线性布局" class="headerlink" title="LinearLayout(线性布局)"></a>LinearLayout(线性布局)</h2><p>单个方向顺序排列布局</p>
<p><strong>容器属性</strong></p>
<ul>
<li>orientation：布局方向，horizontal，vertical</li>
<li>gravity：跟flex的align-item差不多，设置次轴方向，top。left，bottom，right，center等</li>
<li>divider：分割线图片</li>
<li>showDividers：设置分割线的位置,none(无),beginning(开始),end(结束),middle(每两个组件间) </li>
<li>dividerPadding：设置分割线的Padding</li>
</ul>
<p><strong>控件属性</strong></p>
<ul>
<li>weight：权重，一般不需要设大小，当大小设置了match_parent&#x2F;fill_parent又设置权重会有奇妙的现象</li>
<li>layout_gravity：控制该组件在父容器里的对齐方式</li>
<li>layout_width：fill_parent（填满父容器），wrap_content（组件实际大小），match_parent，具体数值（单位dp）</li>
<li>layout_height：同上</li>
<li>background：背景颜色或图片</li>
</ul>
<h2 id="RelativeLayout-相对布局"><a href="#RelativeLayout-相对布局" class="headerlink" title="RelativeLayout(相对布局)"></a>RelativeLayout(相对布局)</h2><p>相对布局：相对于父视图或兄弟视图来确定自身定位</p>
<ul>
<li>根据父容器定位的属性值为true&#x2F;false</li>
<li>根据兄弟组件定位的属性值是参照组件id</li>
<li>相对布局的<code>gravity</code>的居中是将子控件看成一个整体来居中，并非每个子控件单独居中，想要单独居中在子控件用<code>layout_centerVertical</code></li>
</ul>
<p><img src="https://github.com/candlevista/resource/blob/master/797932661-1.png?raw=true" alt="797932661-1"></p>
<h2 id="ConstraintLayout-约束布局"><a href="#ConstraintLayout-约束布局" class="headerlink" title="ConstraintLayout(约束布局)"></a>ConstraintLayout(约束布局)</h2><p>跟iOS约束布局不同的是，设置谁的约束就是谁改变，其他控件不受影响</p>
<p><strong>位置约束</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 基本方向约束</span><br><span class="line">app:layout_constraintTop_toTopOf=&quot;&quot;           我的顶部和谁的顶部对齐</span><br><span class="line">app:layout_constraintTop_toBottomOf=&quot;&quot;        我的顶部位置在谁的底部位置</span><br><span class="line">// 基线对齐</span><br><span class="line">app:layout_constraintBaseline_toBaselineOf=&quot;&quot; </span><br><span class="line">// 角度约束</span><br><span class="line">app:layout_constraintCircle=&quot;&quot;         目标控件id</span><br><span class="line">app:layout_constraintCircleAngle=&quot;&quot;    对于目标的角度(0-360)</span><br><span class="line">app:layout_constraintCircleRadius=&quot;&quot;   到目标中心的距离</span><br><span class="line">// 百分比约束</span><br><span class="line">app:layout_constraintHorizontal_bias=&quot;&quot;   水平偏移 取值范围是0-1的小数，需要设置左右约束</span><br><span class="line">app:layout_constraintVertical_bias=&quot;&quot;     垂直偏移 取值范围是0-1的小数，需要设置上下约束</span><br><span class="line">// 当约束的兄弟视图消失时(gone)，这条约束就会生效</span><br><span class="line">app:layout_goneMarginTop=&quot;10dp&quot;</span><br><span class="line">// 水平居中，top和bottom一起设置，垂直居中同理</span><br><span class="line">app:layout_constraintTop_toTopOf=&quot;&quot;</span><br><span class="line">app:layout_constraintBottom_toBottomOf=&quot;&quot;</span><br></pre></td></tr></table></figure>

<p><strong>控件尺寸</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android:minWidth=&quot;&quot;   设置view的最小宽度</span><br><span class="line">android:minHeight=&quot;&quot;  设置view的最小高度</span><br><span class="line">android:maxWidth=&quot;&quot;   设置view的最大宽度</span><br><span class="line">android:maxHeight=&quot;&quot;  设置view的最大高度</span><br><span class="line">// 约束形式的宽高</span><br><span class="line">app:layout_constraintWidth_default=&quot;spread(填满)|percent(百分比)|wrap(自身大小)&quot;</span><br><span class="line">app:layout_constraintHeight_default=&quot;spread|percent|wrap&quot;</span><br><span class="line">app:layout_constraintWidth_percent=&quot;0.5&quot;  百分比具体值</span><br><span class="line">// 宽高比例</span><br><span class="line">app:layout_constraintDimensionRatio=&quot;1:1&quot;，或&quot;H,2:3&quot;只约束高</span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认情况下，宽高(android:layout_width)优先级高于约束(app:layout_constraint)，可以将宽高赋值为0dp放开限制，或者通过下面属性提高约束优先级</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constrainedWidth=&quot;true&quot;</span><br><span class="line">app:layout_constrainedHeight=&quot;true&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Chains(链)</strong></p>
<p>跟UIStackView很像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 在第一个子控件中设置</span><br><span class="line">layout_constraintHorizontal_chainStyle=&quot;spread|spread_inside|packed&quot;</span><br><span class="line">spread(均分剩余空间)</span><br><span class="line">spread_inside(两侧的控件贴近两边，剩余的控件均分剩余空间)</span><br><span class="line">packed(所有控件贴紧居中，两个TextView并排时可以使用)</span><br><span class="line"></span><br><span class="line">layout_constraintHorizontal_weight=&quot;&quot;  权重</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 两个TextView并排 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">com.jjshome.widget.MidBlackTextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_title&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constrainedWidth</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0&quot;</span>                                     </span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;packed&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/tv_count&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_count&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toRightOf</span>=<span class="string">&quot;@+id/tv_title&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/tv_title&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>辅助类</strong></p>
<p>用于辅助布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">// 水平中心参考线(不会渲染到屏幕)</span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/Guideline&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// 屏障(不会渲染到屏幕)</span><br><span class="line">// Barrier会布局在constraint_referenced_ids中的控件最大宽|高的上|下|左|右</span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Barrier</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/barrier7&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:barrierDirection</span>=<span class="string">&quot;top|bottom|left|right|start|end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;textView2,textView1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// 组(不会渲染到屏幕)</span><br><span class="line">// 给控件分组，用于批量显示隐藏</span><br><span class="line">// 加入到group中的控件，无法再单独设置显隐。</span><br><span class="line">// 使用Group在recyclerView中隐藏或者显示会失效</span><br><span class="line"> <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Group</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;visible&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;A,B,C&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// 流式布局(不会渲染到屏幕)</span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.helper.widget.Flow</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;A,B,C,D,E&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:flow_verticalAlign</span>=<span class="string">&quot;top|bottom|center|baseline&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:flow_wrapMode</span>=<span class="string">&quot;none(单行)|chain(折行，每行view会平分宽度)|aligned(折行，view不会占用剩余空间)&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:flow_horizontalGap</span>=<span class="string">&quot;控件间隙&quot;</span>                                          </span></span><br><span class="line"><span class="tag">        <span class="attr">app:flow_verticalGap</span>=<span class="string">&quot;控件间隙&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:flow_maxElementsWrap</span>=<span class="string">4(每行数量)</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// Layer(相当于容器view)</span><br><span class="line">// 其大小会根据其引用的所有视图进行调整</span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.helper.widget.Layer</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/common_rect_white_100_10&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;AndroidImg,NameTv&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// ImageFilterButton &amp; ImageFilterView</span><br><span class="line">// 可设置圆角</span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.utils.widget.ImageFilterView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:roundPercent</span>=<span class="string">&quot;0.7(百分比)&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">app:round</span>=<span class="string">&quot;5dp(具体值)&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://juejin.cn/post/6949186887609221133#heading-12">ConstraintLayout</a></p>
<h1 id="控件"><a href="#控件" class="headerlink" title="控件"></a>控件</h1><h2 id="View的生命周期"><a href="#View的生命周期" class="headerlink" title="View的生命周期"></a>View的生命周期</h2><p><strong>生命周期回调：</strong></p>
<ul>
<li><p>onFinishInflte：当View及其子View<code>从XML文件中</code>加载完成时调用；</p>
</li>
<li><p>onAttachedToWindow:  当前View被附加加到一个window上时被调用；</p>
</li>
<li><p>onMeasure：计算当前View及其所有子View的尺寸大小时被调用；</p>
</li>
<li><p>onSizeChanged: 当前View的尺寸变化时被调用;</p>
</li>
<li><p>onLayout: 当前View需要为其子View分配尺寸和位置时被调用；</p>
</li>
<li><p>onDraw: 绘制View呈现的内容时被调用；</p>
</li>
<li><p>onWindowFocusChanged: 当前View的window获得或失去焦点时被调用;</p>
</li>
<li><p>onDetachedFromWindow：当前View从一个window上分离时被调用。</p>
</li>
</ul>
<p><strong>View被加载时，根据参数会有三种情况：</strong></p>
<ol>
<li><p>View在Visible(可见)时的调用<br><code>onAttachedToWindow ——&gt; onMeasure ——&gt; onSizeChanged ——&gt; onLayout ——&gt; onDraw</code></p>
</li>
<li><p>View在Visible(不可见)时的调用<br><code>onAttachedToWindow ——&gt; onMeasure ——&gt; onSizeChanged ——&gt; onLayout</code></p>
</li>
<li><p>View在Gone(加载)时的调用<br><code>onAttachedToWindow</code></p>
</li>
</ol>
<p><strong>View销毁时调用 ：</strong><br><code>onWindowFoncusChanged ——&gt; onWindowVisiblityChanged ——&gt; onDetachedFromWindow</code></p>
<p><strong>Activity和View的生命周期的关联情况如下图所示:</strong></p>
<p><img src="https://github.com/candlevista/resource/blob/master/5382839-2b055e1a2a643e19.webp?raw=true"></p>
<h2 id="PopupWindow"><a href="#PopupWindow" class="headerlink" title="PopupWindow"></a>PopupWindow</h2><p>弹窗</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 弹出弹窗前需要判断父视图有没有显示出来</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">null</span> != fatherView.getWindowToken()) &#123;</span><br><span class="line">    addPopupWindow.showAsDropDown(fatherView, x, <span class="number">0</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fatherView.addOnAttachStateChangeListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnAttachStateChangeListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onViewAttachedToWindow</span><span class="params">(View v)</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != v.getWindowToken()) &#123;</span><br><span class="line">                addPopupWindow.showAsDropDown(fatherView, x, <span class="number">0</span>);</span><br><span class="line">                v.removeOnAttachStateChangeListener(<span class="built_in">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure>

<h2 id="ViewFlipper"><a href="#ViewFlipper" class="headerlink" title="ViewFlipper"></a>ViewFlipper</h2><p>轮播控件、引导页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常用属性</span></span><br><span class="line">android:inAnimation    <span class="comment">//设置View或ImageView进入屏幕时使用的动画</span></span><br><span class="line">android:outAnimation   <span class="comment">//设置View或ImageView退出屏幕时使用的动画</span></span><br><span class="line">android:flipInterval   <span class="comment">//设置View或ImageView之间切换的时间间隔</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// java形式</span></span><br><span class="line"><span class="type">Animation</span> <span class="variable">inAnim</span> <span class="operator">=</span> AnimationUtils.loadAnimation(getContext(), inAnimResId);</span><br><span class="line">inAnim.setDuration(animDuration);</span><br><span class="line">setInAnimation(inAnim);</span><br><span class="line"></span><br><span class="line"><span class="type">Animation</span> <span class="variable">outAnim</span> <span class="operator">=</span> AnimationUtils.loadAnimation(getContext(), outAnimResID);</span><br><span class="line">outAnim.setDuration(animDuration);</span><br><span class="line">setOutAnimation(outAnim);</span><br><span class="line">startFlipping();	<span class="comment">// 开始轮播，切换会循环进行</span></span><br></pre></td></tr></table></figure>

<h2 id="CoordinatorLayout、AppBarLayout、CollapsingToolbarLayout"><a href="#CoordinatorLayout、AppBarLayout、CollapsingToolbarLayout" class="headerlink" title="CoordinatorLayout、AppBarLayout、CollapsingToolbarLayout"></a>CoordinatorLayout、AppBarLayout、CollapsingToolbarLayout</h2><p>配合使用可以实现类似UITableView筛选控件吸顶效果</p>
<h3 id="scrollFlags"><a href="#scrollFlags" class="headerlink" title="scrollFlags"></a>scrollFlags</h3><ul>
<li>**scroll（SCROLL_FLAG_SCROLL）：**使用scroll可以让AppBarLayout跟随着向上滚动，直到AppBarLayout完全隐藏，再开始滚动ScrollView。向下滚动时先将ScrollView滚动到最顶端，再开始显示AppBarLayout。必须设置此标识才能使其他的任何标识生效。如果此时图之前的任何视图没有此标志，则此值无效</li>
<li><strong>enterAlways</strong>（<strong>SCROLL_FLAG_ENTER_ALWAYS</strong>）：与scroll类似，向下滚动时一起滚动先将AppBarLayout完全显示，再滚动ScrollView。</li>
<li>**enterAlwaysCollapsed（SCROLL_FLAG_ENTER_ALWAYS_COLLAPSED）：**需要和enterAlways一起使用。向下滚动时，先将AppBarLayout滚动到最小高度，再滚动ScrollView，最后再滚动AppBarLayout直到完全显示。使用时要注意定义最小高度：android:minHeight&#x3D;”10dp”。</li>
<li><strong>exitUntilCollapsed</strong>（<strong>SCROLL_FLAG_EXIT_UNTIL_COLLAPSED</strong>）：向上滚动时，AppBarLayout先向上滚动直到最小高度，然后ScrollView开始滚动。AppBarLayout不会完全退出屏幕，保留一部分。</li>
<li><strong>snap</strong>（<strong>SCROLL_FLAG_SNAP</strong>）：在滚动结束时，如果视图仅部分可见，则他将自动滚到最近的边。滚动超过一半改变状态，完全消失或者完全显示。</li>
</ul>
<blockquote>
<p>内部滚动控件（如：RecycleView）不能隐藏，否则没法滑动</p>
</blockquote>
<h2 id="SurfaceView"><a href="#SurfaceView" class="headerlink" title="SurfaceView"></a>SurfaceView</h2><p>更高性能的绘图view</p>
<p><code>View</code>和<code>SurfaceView</code>的区别:</p>
<p>1 . View适用于主动更新的情况，而SurfaceView则适用于被动更新的情况，比如频繁刷新界面。</p>
<p>2 . View在主线程中对页面进行刷新，而SurfaceView则开启一个子线程来对页面进行刷新。</p>
<p>3 . View在绘图时没有实现双缓冲机制，SurfaceView在底层机制中就实现了双缓冲机制。</p>
<h2 id="WebView"><a href="#WebView" class="headerlink" title="WebView"></a>WebView</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 设置WebViewClient后webview才能在内部容器打开url，否则会跳浏览器，与WebViewClient的shouldOverrideUrlLoading回调无关，网上部分说法有误</span></span><br><span class="line">webView.setWebViewClient(<span class="keyword">new</span> <span class="title class_">WebViewClient</span>())</span><br></pre></td></tr></table></figure>

<blockquote>
<p>避免WebView内存泄漏方法：</p>
<p>在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。</p>
</blockquote>
<h3 id="JS与原生通信"><a href="#JS与原生通信" class="headerlink" title="JS与原生通信"></a>JS与原生通信</h3><p><strong>Android调用JS代码的方法有2种：</strong></p>
<ol>
<li>通过<code>WebView</code>的<code>loadUrl（）</code></li>
<li>通过<code>WebView</code>的<code>evaluateJavascript（）</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mWebView.loadUrl(<span class="string">&quot;javascript:callJS()&quot;</span>);</span><br><span class="line">mWebView.evaluateJavascript（<span class="string">&quot;javascript:callJS()&quot;</span>, <span class="keyword">new</span> <span class="title class_">ValueCallback</span>&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReceiveValue</span><span class="params">(String value)</span> &#123;</span><br><span class="line">        <span class="comment">//此处为 js 返回的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>JS调用Android代码的方法有3种：</strong></p>
<ol>
<li>通过<code>WebView</code>的<code>addJavascriptInterface（）</code>进行对象映射</li>
<li>通过 <code>WebViewClient</code> 的<code>shouldOverrideUrlLoading ()</code>方法回调拦截 url</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// addJavascriptInterface方式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AndroidtoJs</span> <span class="keyword">extends</span> <span class="title class_">Object</span> &#123;</span><br><span class="line">    <span class="comment">// 被JS调用的方法必须加入@JavascriptInterface注解</span></span><br><span class="line">    <span class="meta">@JavascriptInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;JS调用了Android的hello方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">WebSettings</span> <span class="variable">webSettings</span> <span class="operator">=</span> mWebView.getSettings();</span><br><span class="line"><span class="comment">// 设置与Js交互的权限</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 注册映射对象</span></span><br><span class="line">mWebView.addJavascriptInterface(<span class="keyword">new</span> <span class="title class_">AndroidtoJs</span>(), <span class="string">&quot;injs&quot;</span>);</span><br><span class="line"><span class="comment">// JS调用</span></span><br><span class="line">window.injs.hello(<span class="string">&quot;js调用了android中的hello方法&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// shouldOverrideUrlLoading方式</span></span><br><span class="line"><span class="comment">// JS调用</span></span><br><span class="line">document.location = <span class="string">&quot;js://webview?arg1=111&amp;arg2=222&quot;</span>;</span><br><span class="line"><span class="comment">// 设置与Js交互的权限</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line">mWebView.setWebViewClient(<span class="keyword">new</span> <span class="title class_">WebViewClient</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldOverrideUrlLoading</span><span class="params">(WebView view, String url)</span> &#123;</span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(url);                                 </span><br><span class="line">        <span class="comment">// 如果url的协议 = 预先约定的 js 协议</span></span><br><span class="line">        <span class="comment">// 就解析往下解析参数</span></span><br><span class="line">        <span class="keyword">if</span> ( uri.getScheme().equals(<span class="string">&quot;js&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 如果 authority  = 预先约定协议里的 webview，即代表都符合约定的协议</span></span><br><span class="line">            <span class="comment">// 所以拦截url,下面JS开始调用Android需要的方法</span></span><br><span class="line">            <span class="keyword">if</span> (uri.getAuthority().equals(<span class="string">&quot;webview&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 可以在协议上带有参数并传递到Android上</span></span><br><span class="line">                HashMap&lt;String, String&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                Set&lt;String&gt; collection = uri.getQueryParameterNames();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.shouldOverrideUrlLoading(view, url);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><a href="https://carsonho.blog.csdn.net/article/details/79999529?spm=1001.2014.3001.5502">全面 &amp; 详细的WebView学习指南</a></p>
<h2 id="NestedScrollView"><a href="#NestedScrollView" class="headerlink" title="NestedScrollView"></a>NestedScrollView</h2><p>支持嵌套滑动的scrollview，内嵌了其他scrollview也能实现无缝切换滑动，iOS没有这种控件</p>
<blockquote>
<p>NestedScrollView 与 ScrollView 一样，内部只能容纳一个子控件。</p>
</blockquote>
<h2 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h2><p>RecyclerView需要设置LinearLayoutManager，否则代理方法不执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 网格布局：GridLayoutManager，瀑布流：StaggeredGridLayoutManager</span></span><br><span class="line"><span class="type">LinearLayoutManager</span> <span class="variable">manager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>);</span><br><span class="line">manager.setOrientation(LinearLayoutManager.VERTICAL);<span class="comment">//默认</span></span><br><span class="line">recyclerView.setLayoutManager(manager);</span><br><span class="line"><span class="comment">// 当rv大小不随内容多少而变化时，设置该值，避免不必要的调用requestLayout，优化性能</span></span><br><span class="line">recyclerView.setHasFixedSize(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 监听一个View添加到RecyclerView和离开RecyclerView</span></span><br><span class="line"><span class="type">OnChildAttachStateChangeListener</span> <span class="variable">listener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecyclerView</span>.OnChildAttachStateChangeListener() &#123;</span><br><span class="line">  	<span class="comment">// 添加到RecyclerView</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onChildViewAttachedToWindow</span><span class="params">(<span class="meta">@NonNull</span> View view)</span> &#123;&#125;</span><br><span class="line">		<span class="comment">// 离开RecyclerView</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onChildViewDetachedFromWindow</span><span class="params">(<span class="meta">@NonNull</span> View view)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">recyclerView.addOnChildAttachStateChangeListener(listener);</span><br></pre></td></tr></table></figure>

<p><strong>Adapter</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RecyclerView的Adapter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;MyAdapter.ViewHolder&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; dataList;</span><br><span class="line">  	<span class="comment">// cell的点击事件</span></span><br><span class="line"> 	 	<span class="keyword">private</span> ItemClickListener mClickListener;</span><br><span class="line"></span><br><span class="line">    MyAdapter(List&lt;String&gt; dataList, ItemClickListener clickListener) &#123;</span><br><span class="line">        <span class="built_in">this</span>.dataList = dataList;</span><br><span class="line">	      <span class="built_in">this</span>.mClickListener = clickListener;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">// 将RecyclerView和具体cell关联</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(parent.getContext()).inflate(R.layout.rv_item, parent, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>(view, mClickListener);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// 给cell赋值的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> dataList.get(position);</span><br><span class="line">        holder.tv.setText(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dataList == <span class="literal">null</span> ? <span class="number">0</span> : dataList.size();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">// 由于官方未实现RecyclerView的Item点击事件，所以需要自行实现。</span></span><br><span class="line">	<span class="comment">// cell的事件处理  </span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line">        <span class="keyword">private</span> TextView tv;</span><br><span class="line"></span><br><span class="line">        ViewHolder(<span class="meta">@NonNull</span> View itemView, ItemClickListener clickListener) &#123;</span><br><span class="line">            <span class="built_in">super</span>(itemView);</span><br><span class="line">            tv = itemView.findViewById(R.id.tv);</span><br><span class="line">	          tv.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                  	<span class="comment">// 必须要这种方式获取position</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> getAdapterPosition();</span><br><span class="line">                    <span class="keyword">if</span> (position != RecyclerView.NO_POSITION) &#123;</span><br><span class="line">                        clickListener.onClickItem(v, position);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>添加分割线</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加Android自带的分割线</span></span><br><span class="line">recyclerView.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(<span class="built_in">this</span>,DividerItemDecoration.VERTICAL));</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加自定义分割线</span></span><br><span class="line"><span class="type">DividerItemDecoration</span> <span class="variable">divider</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(<span class="built_in">this</span>,DividerItemDecoration.VERTICAL);</span><br><span class="line"><span class="comment">// custom_divider是自定义xml</span></span><br><span class="line">divider.setDrawable(ContextCompat.getDrawable(<span class="built_in">this</span>,R.drawable.custom_divider));</span><br><span class="line">recyclerView.addItemDecoration(divider);</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- custom_divider --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:centerColor</span>=<span class="string">&quot;#ff00ff00&quot;</span> //<span class="attr">绿色</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:endColor</span>=<span class="string">&quot;#ff0000ff&quot;</span>    //<span class="attr">蓝色</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startColor</span>=<span class="string">&quot;#ffff0000&quot;</span>  //<span class="attr">红色</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:type</span>=<span class="string">&quot;linear&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">&quot;3dp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/Lindroid20/article/details/76407954">RecyclerView添加分割线的简便方法</a></p>
</blockquote>
<h2 id="自定义alert-Dialog"><a href="#自定义alert-Dialog" class="headerlink" title="自定义alert(Dialog)"></a>自定义alert(Dialog)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">AlertDialog</span> <span class="variable">alert</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> AlertDialog.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        mContext = MainActivity.<span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化Builder</span></span><br><span class="line">        builder = <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(mContext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//加载自定义的那个View</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">LayoutInflater</span> <span class="variable">inflater</span> <span class="operator">=</span> MainActivity.<span class="built_in">this</span>.getLayoutInflater();</span><br><span class="line">          <span class="comment">// 加载自定义view样式</span></span><br><span class="line">        view_custom = inflater.inflate(R.layout.view_dialog_custom, <span class="literal">null</span>,<span class="literal">false</span>);</span><br><span class="line">        builder.setView(view_custom);</span><br><span class="line">        builder.setCancelable(<span class="literal">false</span>);</span><br><span class="line">        alert = builder.create();</span><br><span class="line">          alert.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义View"><a href="#自定义View" class="headerlink" title="自定义View"></a>自定义View</h2><p>measure确定View的测量宽&#x2F;高，确定后调用onMeasure，可在onMeasure中重新设置宽高；layout确定View的最终宽&#x2F;高和四个顶点的位置，确定后调用onLayout；而draw则将View绘制到屏幕上。</p>
<p>自定义view可以通过两种方式绘制布局</p>
<ol>
<li>重写<code>onMeasure()、onLayout()、onDraw()</code>（这种方法一般用于自己绘制view）</li>
<li>通过<code>View.inflate()</code>加载布局文件（这种方法一般用于组合view，自己继承五大布局）</li>
</ol>
<blockquote>
<p>其中如果是继承View的方式实现组合view，内部控件无法通过onClickListener方式来实现监听，需要最外层view的onTouchEvent传递给子view。继承五大布局和ViewGroup没有这个问题</p>
<p>LayoutParams是指xml上写的布局属性</p>
<p>继承view的控件需要在onDraw处理padding，否则padding无效</p>
<p>尽量不要在View中使用Handler，因为View内部本身就提供了post系列的方法，完全可以替代Handler的作用</p>
<p>ViewGroup默认不会实现onMeasure，padding是默认无法生效，wrap_content和match_parent也是等效，需要子类实现，五大布局没有这个问题</p>
</blockquote>
<h3 id="方式一：重写onMeasure方式"><a href="#方式一：重写onMeasure方式" class="headerlink" title="方式一：重写onMeasure方式"></a>方式一：重写onMeasure方式</h3><p>普通View的MeasureSpec的创建规则</p>
<p><img src="https://github.com/candlevista/resource/blob/master/WX20230307-223810@2x.png?raw=true" alt="普通View的MeasureSpec的创建规则"></p>
<p><strong>重写onMeasure</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment">mode有以下值:</span></span><br><span class="line"><span class="comment">    UNSPECIFIED    父容器没有对当前View有任何限制，当前View可以任意取尺寸</span></span><br><span class="line"><span class="comment">    EXACTLY    当前的尺寸就是当前View应该取的尺寸，对应于match_parent和具体数值情况xxdp</span></span><br><span class="line"><span class="comment">    AT_MOST    当前尺寸是当前View能取的最大尺寸，一般用于wrap_content</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    如果View在布局中使用wrap_content，那么它的specMode是AT_MOST模式，这种情况下默认View的specSize是parentSize，如果不处理AT_MOST情况，最终的效果也和match_parent一样</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  	<span class="comment">// 如果是viewGroup类型，可以先布局子元素，子元素不需要调这方法</span></span><br><span class="line">	  measureChildren(widthMeasureSpec,heightMeasureSpec);</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> <span class="variable">widthSpecMode</span> <span class="operator">=</span> MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">    <span class="type">int</span> <span class="variable">widthSpecSize</span> <span class="operator">=</span> MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">    <span class="type">int</span> <span class="variable">heightSpecMode</span> <span class="operator">=</span> MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">    <span class="type">int</span> <span class="variable">heightSpecSize</span> <span class="operator">=</span> MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line">    <span class="keyword">if</span> (widthSpecMode == MeasureSpec.AT_MOST &amp;&amp; heightSpecMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">      	<span class="comment">// 自定义的宽高</span></span><br><span class="line">    		setMeasuredDimension(mWidth,mHeight);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (widthSpecMode == MeasureSpec.AT_MOST) &#123;	</span><br><span class="line">      	<span class="comment">// 非wrap_content情形，沿用系统的测量值</span></span><br><span class="line">        setMeasuredDimension(mWidth,heightSpecSize);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (heightSpecMode == MeasureSpec.AT_MOST) &#123;	</span><br><span class="line">      	<span class="comment">// 非wrap_content情形，沿用系统的测量值</span></span><br><span class="line">       	setMeasuredDimension(widthSpecSize,mHeight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重写onLayout（viewGroup等类实现，view可以不实现）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法未考虑自身的padding以及子元素的margin</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onLayout</span><span class="params">(<span class="type">boolean</span> changed,<span class="type">int</span> l,<span class="type">int</span> t,<span class="type">int</span> r,<span class="type">int</span> b)</span> &#123;</span><br><span class="line">  	</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">childCount</span> <span class="operator">=</span> getChildCount();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">paddingLeft</span> <span class="operator">=</span> getPaddingLeft();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">paddingRight</span> <span class="operator">=</span> getPaddingRight();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">paddingTop</span> <span class="operator">=</span> getPaddingTop();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">paddingBottom</span> <span class="operator">=</span> getPaddingBottom();</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; childCount; i++) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">View</span> <span class="variable">childView</span> <span class="operator">=</span> getChildAt(i);</span><br><span class="line">        <span class="keyword">if</span> (childView.getVisibility() != View.GONE) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">childWidth</span> <span class="operator">=</span> childView.getMeasuredWidth();</span><br><span class="line">	          <span class="keyword">final</span> <span class="type">int</span> <span class="variable">childHeight</span> <span class="operator">=</span> childView.getMeasuredHeight();</span><br><span class="line">						<span class="comment">// 设置子视图布局</span></span><br><span class="line">            childView.layout(left, right, childWidth, childHeight);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重写onDraw</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">    <span class="comment">//调用父View的onDraw函数，因为View这个类帮我们实现了一些基本的而绘制功能，比如绘制背景颜色、背景图片等</span></span><br><span class="line">    <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">    <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> getMeasuredWidth() / <span class="number">2</span>;<span class="comment">//也可以是getMeasuredHeight()/2,本例中我们已经将宽高设置相等了</span></span><br><span class="line">    <span class="comment">//圆心的横坐标为当前的View的左边起始位置+半径</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> getLeft() + r;</span><br><span class="line">    <span class="comment">//圆心的纵坐标为当前的View的顶部起始位置+半径</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> getTop() + r;</span><br><span class="line">  	<span class="comment">// 获取padding</span></span><br><span class="line">  	<span class="keyword">final</span> <span class="type">int</span> <span class="variable">paddingLeft</span> <span class="operator">=</span> getPaddingLeft();</span><br><span class="line"></span><br><span class="line">    <span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">    paint.setColor(Color.GREEN);</span><br><span class="line">    <span class="comment">//开始绘制</span></span><br><span class="line">    canvas.drawCircle(centerX, centerY, r, paint);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方式二：加载布局文件方式"><a href="#方式二：加载布局文件方式" class="headerlink" title="方式二：加载布局文件方式"></a>方式二：加载布局文件方式</h3><p>加载布局文件方式在类中要重写所有构造函数</p>
<blockquote>
<p>布局文件最外层可以用<merge/>标签，少嵌套一层</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">FootButtonView</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyle)</span> &#123;</span><br><span class="line">  	<span class="comment">// 方式一：</span></span><br><span class="line">    <span class="comment">// 实例化了一个resource对应的View</span></span><br><span class="line">    <span class="comment">// View.inflate实际调用factory.inflate</span></span><br><span class="line">	  <span class="comment">// 当root传参为this时，意思是加到this下，不需要再addView()，传null则需要</span></span><br><span class="line">	  <span class="comment">// 如果root传null，再addView()，会导致根布局的宽高match_parent不生效</span></span><br><span class="line">    <span class="type">View</span> <span class="variable">footView</span> <span class="operator">=</span> View.inflate(context, R.layout.view_footbtn, <span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Avtivity本身不是viewGroup，因此需要setContentView()或addContentView()</span></span><br><span class="line">    <span class="comment">// setContentView(footView);</span></span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// 方式二(不需要addView)：</span></span><br><span class="line">  	<span class="type">LayoutInflater</span> <span class="variable">inflater</span> <span class="operator">=</span> (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);</span><br><span class="line">    <span class="type">LinearLayout</span> <span class="variable">root</span> <span class="operator">=</span> (LinearLayout) inflater.inflate(R.layout.view_footbtn, <span class="built_in">this</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>factory.inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot)</code></p>
<p>root与attachToRoot需要配合使用，不同取值对应下面的情况：</p>
<ol>
<li><p>root 为 null<br>attachToRoot不起任何作用，该方法仅仅就是实例化了一个resource对应的View</p>
</li>
<li><p>root 不为null， attachToRoot为 true<br>resource被添加到root中，并且resource设置的根布局参数起作用（说明：resource设置的layout_width&#x2F;layout_height等参数指的是该控件在父容器的大小，只有放到父容器这些参数才会起作用。所以当attachToRoot设置为true时候，resource对应的布局参数才会起作用）（此时return的是入参的root，不是resource的根view，因此循环addView时不能将attachToRoot设为true，否则永远会取到第一个元素）</p>
</li>
<li><p>root不为null， attachToRoot为false<br>resource对应的根节点参数有效，但是resource并没有添加到root中，需要手动调用root.addView(resource)，而2.已经不需要额外调用（此时return的是resource的根view）</p>
</li>
</ol>
<h3 id="添加和读取自定义属性"><a href="#添加和读取自定义属性" class="headerlink" title="添加和读取自定义属性"></a>添加和读取自定义属性</h3><p><strong>添加布局属性</strong></p>
<p><code>res/values/styles.xml</code>文件中增加属性（文件可以任意命名）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--name为声明的&quot;属性集合&quot;名，可以随便取--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;MyViewAttr&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--声明我们的属性，名称为default_size,取值类型为尺寸类型（dp,px等）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;default_size&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>在布局文件应用</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--为了使用自定义属性，需要在根标签里面设定命名空间，命名空间名称可以随便取，比如hc，命名空间后面取得值是固定的：&quot;http://schemas.android.com/apk/res-auto&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这里的自定义属性与上面定义的没有强关联，编译器会扫描整个项目拿到全部attr标签，自定义view中可以添加任意已声明的attr标签，不局限于MyViewAttr声明的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:hc</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.hc.studyview.MyView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">hc:default_size</span>=<span class="string">&quot;100dp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>读取属性值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> defalutSize;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyView</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    <span class="comment">//第二个参数就是我们在styles.xml文件中的&lt;declare-styleable&gt;标签</span></span><br><span class="line">    <span class="comment">//即属性集合的标签，在R文件中名称为R.styleable+name</span></span><br><span class="line">    <span class="type">TypedArray</span> <span class="variable">a</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.MyViewAttr);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//第一个参数为属性集合里面的属性，R文件名称：R.styleable+属性集合名称+下划线+属性名称</span></span><br><span class="line">    <span class="comment">//第二个参数为，如果没有设置这个属性，则设置的默认的值</span></span><br><span class="line">    defalutSize = a.getDimensionPixelSize(R.styleable.MyViewAttr_default_size, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//最后记得将TypedArray对象回收</span></span><br><span class="line">    a.recycle();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id=""><a href="#" class="headerlink" title=""></a></h1>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/" rel="prev" title="Android学习笔记3">
      <i class="fa fa-chevron-left"></i> Android学习笔记3
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/05/20/Android%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="next" title="Android小技巧">
      Android小技巧 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#AndroidManifest"><span class="nav-number">1.</span> <span class="nav-text">AndroidManifest</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E8%B5%84%E6%BA%90"><span class="nav-number">2.</span> <span class="nav-text">应用资源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%82%B9%E4%B9%9D%E5%9B%BE"><span class="nav-number">2.1.</span> <span class="nav-text">点九图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E9%85%8D%E7%BD%AE%E5%8F%98%E6%9B%B4"><span class="nav-number">3.</span> <span class="nav-text">处理配置变更</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%83%E5%B1%80"><span class="nav-number">4.</span> <span class="nav-text">布局</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="nav-number">4.1.</span> <span class="nav-text">小技巧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LinearLayout-%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80"><span class="nav-number">4.2.</span> <span class="nav-text">LinearLayout(线性布局)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RelativeLayout-%E7%9B%B8%E5%AF%B9%E5%B8%83%E5%B1%80"><span class="nav-number">4.3.</span> <span class="nav-text">RelativeLayout(相对布局)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ConstraintLayout-%E7%BA%A6%E6%9D%9F%E5%B8%83%E5%B1%80"><span class="nav-number">4.4.</span> <span class="nav-text">ConstraintLayout(约束布局)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A7%E4%BB%B6"><span class="nav-number">5.</span> <span class="nav-text">控件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#View%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">5.1.</span> <span class="nav-text">View的生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PopupWindow"><span class="nav-number">5.2.</span> <span class="nav-text">PopupWindow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ViewFlipper"><span class="nav-number">5.3.</span> <span class="nav-text">ViewFlipper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CoordinatorLayout%E3%80%81AppBarLayout%E3%80%81CollapsingToolbarLayout"><span class="nav-number">5.4.</span> <span class="nav-text">CoordinatorLayout、AppBarLayout、CollapsingToolbarLayout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#scrollFlags"><span class="nav-number">5.4.1.</span> <span class="nav-text">scrollFlags</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SurfaceView"><span class="nav-number">5.5.</span> <span class="nav-text">SurfaceView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WebView"><span class="nav-number">5.6.</span> <span class="nav-text">WebView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JS%E4%B8%8E%E5%8E%9F%E7%94%9F%E9%80%9A%E4%BF%A1"><span class="nav-number">5.6.1.</span> <span class="nav-text">JS与原生通信</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NestedScrollView"><span class="nav-number">5.7.</span> <span class="nav-text">NestedScrollView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RecyclerView"><span class="nav-number">5.8.</span> <span class="nav-text">RecyclerView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89alert-Dialog"><span class="nav-number">5.9.</span> <span class="nav-text">自定义alert(Dialog)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89View"><span class="nav-number">5.10.</span> <span class="nav-text">自定义View</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E9%87%8D%E5%86%99onMeasure%E6%96%B9%E5%BC%8F"><span class="nav-number">5.10.1.</span> <span class="nav-text">方式一：重写onMeasure方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E5%8A%A0%E8%BD%BD%E5%B8%83%E5%B1%80%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="nav-number">5.10.2.</span> <span class="nav-text">方式二：加载布局文件方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%92%8C%E8%AF%BB%E5%8F%96%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="nav-number">5.10.3.</span> <span class="nav-text">添加和读取自定义属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">6.</span> <span class="nav-text"></span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="火箭快餐"
      src="/uploads/avatar.jpeg">
  <p class="site-author-name" itemprop="name">火箭快餐</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">火箭快餐</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
