<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"9RQY3CC5KU","apiKey":"dd51b14f02d2eb01b654e5b8d79688b8","indexName":"My Blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="GradleGradle是一个项目自动化建构工具，帮我们做了依赖,打包,部署,发布,各种渠道的差异管理等工作，Groovy是编程语言 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&#x2F;&#x2F; 声明变量def a &#x3D; 1def b &#x3D; &quot;hello world&quot;def">
<meta property="og:type" content="article">
<meta property="og:title" content="Android学习笔记4">
<meta property="og:url" content="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/index.html">
<meta property="og:site_name" content="火箭快餐的博客">
<meta property="og:description" content="GradleGradle是一个项目自动化建构工具，帮我们做了依赖,打包,部署,发布,各种渠道的差异管理等工作，Groovy是编程语言 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&#x2F;&#x2F; 声明变量def a &#x3D; 1def b &#x3D; &quot;hello world&quot;def">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-03-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-03T08:50:36.281Z">
<meta property="article:author" content="火箭快餐">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Android学习笔记4 | 火箭快餐的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">火箭快餐的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpeg">
      <meta itemprop="name" content="火箭快餐">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="火箭快餐的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Android学习笔记4
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-25 00:00:00" itemprop="dateCreated datePublished" datetime="2024-03-25T00:00:00+08:00">2024-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-08-03 16:50:36" itemprop="dateModified" datetime="2025-08-03T16:50:36+08:00">2025-08-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h1><p>Gradle是一个项目自动化建构工具，帮我们做了依赖,打包,部署,发布,各种渠道的差异管理等工作，Groovy是编程语言</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明变量</span></span><br><span class="line"><span class="keyword">def</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> b = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="type">int</span> c = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> d = <span class="string">&quot;a=$&#123;a&#125;, b=$&#123;b&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明方法</span></span><br><span class="line"><span class="keyword">def</span> hello(String msg) &#123;</span><br><span class="line">   println <span class="string">&quot;hello world&quot;</span> <span class="comment">// 方法调用省略括号</span></span><br><span class="line">   <span class="number">1</span>;                    <span class="comment">// 方法返回值省略return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> hello(msg) &#123;    <span class="comment">// 方法省略参数类型</span></span><br><span class="line">   println (msg)</span><br><span class="line">   <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明闭包</span></span><br><span class="line"><span class="keyword">def</span> test = &#123; a, b -&gt;    <span class="comment">// 这里省略了闭包的参数类型</span></span><br><span class="line">   println <span class="string">&quot;a=$&#123;a&#125;, b=$&#123;b&#125;, I am a closure!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> test = &#123;    <span class="comment">// 这里省略了闭包的参数类型</span></span><br><span class="line">   println <span class="string">&quot;find $&#123;it&#125;, I am a closure!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明List和Map</span></span><br><span class="line"><span class="keyword">def</span> test = [<span class="number">100</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">true</span>]</span><br><span class="line">test[<span class="number">1</span>] = <span class="string">&quot;world&quot;</span></span><br><span class="line">test &lt;&lt; <span class="number">200</span>    <span class="comment">// 给list添加元素</span></span><br><span class="line"><span class="keyword">def</span> test = [<span class="string">&quot;id&quot;</span>:<span class="number">1</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;renyugang&quot;</span>, <span class="string">&quot;isMale&quot;</span>:<span class="literal">true</span>]</span><br><span class="line">test[<span class="string">&quot;id&quot;</span>] = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">   String name    <span class="comment">// 包含set/get方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="keyword">def</span> file = <span class="keyword">new</span> File(<span class="string">&quot;a.txt&quot;</span>)</span><br><span class="line">file.eachLine &#123; line -&gt;    <span class="comment">// eachLine接收参数为闭包</span></span><br><span class="line">   println <span class="string">&quot;$&#123;line&#125;&quot;</span>    <span class="comment">// 打印文件的每一行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Task可以理解为Gradle的执行单元，</span></span><br><span class="line">task myTask &#123;</span><br><span class="line">    println <span class="string">&quot;config myTask&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="安卓中的gradle"><a href="#安卓中的gradle" class="headerlink" title="安卓中的gradle"></a>安卓中的gradle</h2><ul>
<li>gradle-wrapper.properties<ul>
<li>distributionUrl：使用的gradle版本，如果下载不了可以换镜像<code>distributionUrl=https\://mirrors.cloud.tencent.com/gradle/gradle-7.5-all.zip</code></li>
</ul>
</li>
<li>build.gradle（Project）<ul>
<li>buildscript：声明是gradle脚本自身需要使用的资源。可以声明的资源包括依赖项、第三方插件、maven仓库地址等<ul>
<li>repositories：托管第三方插件的平台，类似cocoapods的source</li>
<li>dependencies：Gradle需要的插件</li>
</ul>
</li>
<li>ext：自定义属性，定义一些版本的信息等属性后供其他gradle使用</li>
<li>allprojects：buildscript中的声明是gradle脚本自身需要使用的资源，allprojects声明的却是你所有module所需要使用的资源</li>
</ul>
</li>
<li>build.gradle（Module）<ul>
<li>apply plugin：引入Gradle插件，依赖build.gradle（Project）去声明并下载</li>
<li>android<ul>
<li>defaultConfig<ul>
<li>ndk：多平台编译，生成有so包的时候使用，包括四个平台’armeabi’, ‘x86’, ‘armeabi-v7a’, ‘mips’。一般使用第三方提供的SDK的时候，可能会附带so库。</li>
<li>buildTypes：分为debug和release<ul>
<li>signingConfig：当前打包环境用哪种签名</li>
</ul>
</li>
</ul>
</li>
<li>productFlavors ：多渠道打包，可以在不同的包定义不同的变量，实现定制化版本的需求<ul>
<li>manifestPlaceholders：可以通过它动态配置AndroidManifest文件一些内容，譬如app的名字</li>
<li>buildConfigField：定义变量，可以在项目中通过BuildConfig类读取这些变量</li>
<li>dimension：配合flavorDimensions使用，不知道干嘛用</li>
</ul>
</li>
<li>flavorDimensions：维度，不知道干嘛用</li>
<li>dexOptions：编译相关</li>
<li>signingConfigs：配置项目的所有签名文件</li>
</ul>
</li>
<li>dependencies：模块的依赖，类似podfile<ul>
<li>implementation fileTree(include: [‘*.jar’], dir: ‘libs’)：依赖本地libs文件夹下的扩展名为jar的文件</li>
<li>implementation project(‘:uikit’)：依赖其他本地模块</li>
<li>debugImplementation ‘com.gn.logcatlibrary:mylogcatlibrary:1.0.2’：依赖远端库</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Transform"><a href="#Transform" class="headerlink" title="Transform"></a>Transform</h2><p>Gradle Transform是Android 官方提供给开发者在项目构建阶段（class-&gt;dex期间）用来修改.class文件的一套标准API</p>
<blockquote>
<p>Transform在Gradle8.0中被移除了</p>
</blockquote>
<p><strong>参考</strong></p>
<blockquote>
<ul>
<li><a href="https://blog.csdn.net/yechaoa/article/details/80484468?ops_request_misc=&request_id=&biz_id=102&utm_term=Gradle&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-80484468.142%5Ev10%5Econtrol,157%5Ev4%5Econtrol&spm=1018.2226.3001.4187">彻底弄明白Gradle相关配置_yechaoa的博客-CSDN博客_gradle</a></li>
<li><a href="https://juejin.cn/post/6950094457307922462">Gradle学习系列（五）：Gradle Transform</a></li>
</ul>
</blockquote>
<h1 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><ul>
<li><p><strong>私有目录</strong>：只允许app访问自己的空间，其中包含内部私有和外部私有，内部私有在<code>/data/data/</code>，外部私有在<code>sdcard/Android/data/</code>。私有目录下的子目录</p>
<ul>
<li>cache–&gt;存放缓存文件，读取方式：<code>context.getCacheDir();, context.getExternalCacheDirs();</code></li>
<li>code_cache–&gt;存放运行时代码优化等产生的缓存</li>
<li>databases–&gt;存放数据库文件</li>
<li>files–&gt;存放一般文件，读取内部私有方式：<code>context.getFilesDir();, context.getExternalFilesDirs(null);</code></li>
<li>shared_prefs–&gt;存放SharedPreferences 文件</li>
<li>lib–&gt;存放App依赖的so库 是软链接，指向&#x2F;data&#x2F;app&#x2F; 某个子目录下</li>
</ul>
</li>
<li><p><strong>访问媒体文件</strong>：视频、图片等可能分散存储在各个不同的目录里，如果想要获取所有的图片地址，那么得需要遍历不同的目录寻找，效率显而易见的低。Android 将视频、图片等信息存储在数据库里，每当某个App想要访问这些共享的媒体文件时只需要查找数据库对应的表，读取符合条件的行，找出每个媒体的文件路径等信息。<br>App查询共享存储空间的媒体方式是：通过ContentProvider访问。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问媒体文件 以查询图片为例：</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getImagePath</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">    <span class="type">ContentResolver</span> <span class="variable">contentResolver</span> <span class="operator">=</span> context.getContentResolver();</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> contentResolver.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">while</span>(cursor.moveToNext()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">imagePath</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="访问文档和其它文件："><a href="#访问文档和其它文件：" class="headerlink" title="访问文档和其它文件："></a>访问文档和其它文件：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_GET_CONTENT);</span><br><span class="line">intent.setType(<span class="string">&quot;*/*&quot;</span>); <span class="comment">// 可以选择文件的类型，*/* 表示所有类型</span></span><br><span class="line">intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, <span class="literal">true</span>); <span class="comment">// 允许多选</span></span><br><span class="line">startActivityForResult(Intent.createChooser(intent, <span class="string">&quot;选择文件&quot;</span>), REQUEST_CODE);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>外部存储根目录（公有）</strong>：<code>Environment.getExternalStorageDirectory();</code></p>
<blockquote>
<p><strong>Android 10无法直接访问外部空间，Android 11又改回可以访问，但要加权限</strong></p>
</blockquote>
</li>
</ul>
<p><a href="https://juejin.cn/post/7012108220982362149#heading-0">Android-存储基础</a></p>
<p><a href="https://juejin.cn/post/7012262477828194340#heading-1">Android-10、11-存储完全适配(下)</a></p>
<h2 id="文件存取"><a href="#文件存取" class="headerlink" title="文件存取"></a>文件存取</h2><p><strong>操作模式</strong></p>
<ul>
<li><p>MODE_PRIVATE：默认模式，app私有，写入的内容会覆盖原内容</p>
</li>
<li><p>MODE_APPEND：同上，写入内容会追加到文件尾部</p>
</li>
<li><p>MODE_WORLD_READABLE：当前文件 可以被其他应用读取</p>
</li>
<li><p>MODE_WORLD_WRITEABLE：当前文件可以被其他应用写入</p>
</li>
</ul>
<p>后面两个用于控制文件读写权限，可以同时设置，<code>+</code>号拼接</p>
<h3 id="读写app沙盒文件"><a href="#读写app沙盒文件" class="headerlink" title="读写app沙盒文件"></a>读写app沙盒文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileHelper</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileHelper</span><span class="params">(Context mContext)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.mContext = mContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 这里定义的是一个文件保存的方法，写入到文件中，所以是输出流</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(String filename, String filecontent)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//这里我们使用私有模式,创建出来的文件只能被本应用访问,还会覆盖原文件哦</span></span><br><span class="line">          <span class="comment">//mContext.openFileOutput方式读写使用默认路径：data/data/&lt;应用包名&gt;/file目录下</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">output</span> <span class="operator">=</span> mContext.openFileOutput(filename, Context.MODE_PRIVATE);</span><br><span class="line">        output.write(filecontent.getBytes());  <span class="comment">//将String字符串以字节流的形式写入到输出流中</span></span><br><span class="line">        output.close();         <span class="comment">//关闭输出流</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 这里定义的是文件读取的方法</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">read</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//打开文件输入流</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">input</span> <span class="operator">=</span> mContext.openFileInput(filename);</span><br><span class="line">        <span class="type">byte</span>[] temp = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//读取文件内容:</span></span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(temp)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            sb.append(<span class="keyword">new</span> <span class="title class_">String</span>(temp, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭输入流</span></span><br><span class="line">        input.close();</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="读写SD卡文件"><a href="#读写SD卡文件" class="headerlink" title="读写SD卡文件"></a>读写SD卡文件</h3><p>需要权限，Android 6.0开始还需要动态申请权限</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在SDCard中创建与删除文件权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 往SDCard写入数据权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SDFileHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SDFileHelper</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SDFileHelper</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//往SD卡写入文件的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">savaFileToSD</span><span class="params">(String filename, String filecontent)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//如果手机已插入sd卡,且app具有读写sd卡的权限</span></span><br><span class="line">        <span class="keyword">if</span> (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) &#123;</span><br><span class="line">            filename = Environment.getExternalStorageDirectory().getCanonicalPath() + <span class="string">&quot;/&quot;</span> + filename;</span><br><span class="line">            <span class="comment">//这里就不要用openFileOutput了,那个是往手机内存中写数据的</span></span><br><span class="line">            <span class="type">FileOutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filename);</span><br><span class="line">            output.write(filecontent.getBytes());</span><br><span class="line">            <span class="comment">//将String字符串以字节流的形式写入到输出流中</span></span><br><span class="line">            output.close();</span><br><span class="line">            <span class="comment">//关闭输出流</span></span><br><span class="line">        &#125; <span class="keyword">else</span> Toast.makeText(context, <span class="string">&quot;SD卡不存在或者不可读写&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取SD卡中文件的方法</span></span><br><span class="line">    <span class="comment">//定义读取文件的方法:</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readFromSD</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) &#123;</span><br><span class="line">            filename = Environment.getExternalStorageDirectory().getCanonicalPath() + <span class="string">&quot;/&quot;</span> + filename;</span><br><span class="line">            <span class="comment">//打开文件输入流</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filename);</span><br><span class="line">            <span class="type">byte</span>[] temp = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//读取文件内容:</span></span><br><span class="line">            <span class="keyword">while</span> ((len = input.read(temp)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                sb.append(<span class="keyword">new</span> <span class="title class_">String</span>(temp, <span class="number">0</span>, len));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//关闭输入流</span></span><br><span class="line">            input.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="读取raw和assets文件夹下的文件"><a href="#读取raw和assets文件夹下的文件" class="headerlink" title="读取raw和assets文件夹下的文件"></a>读取raw和assets文件夹下的文件</h3><ul>
<li><strong>res&#x2F;raw</strong>：文件会被映射到R.java文件中，访问的时候直接通过资源ID即可访问，而且 他不能有目录结构，就是不能再创建文件夹</li>
<li><strong>assets</strong>：不会映射到R.java文件中，通过AssetManager来访问，能有目录结构，即， 可以自行创建文件夹</li>
</ul>
<p><strong>res&#x2F;raw</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span>getResources().openRawResource(R.raw.filename);  </span><br></pre></td></tr></table></figure>

<p><strong>assets</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AssetManager</span> <span class="variable">am</span> <span class="operator">=</span>  getAssets();  </span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> am.open(<span class="string">&quot;filename&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="用户偏好"><a href="#用户偏好" class="headerlink" title="用户偏好"></a>用户偏好</h2><p>SharedPreferences，跟iOS的plist差不多，下面封装好了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Jay on 2015/9/2 0002.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SPUtils</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存在手机里的SP文件名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILE_NAME</span> <span class="operator">=</span> <span class="string">&quot;my_sp&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(Context context, String key, Object obj)</span> &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.<span class="type">Editor</span> <span class="variable">editor</span> <span class="operator">=</span> sp.edit();</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Boolean) &#123;</span><br><span class="line">            editor.putBoolean(key, (Boolean) obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Float) &#123;</span><br><span class="line">            editor.putFloat(key, (Float) obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">            editor.putInt(key, (Integer) obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Long) &#123;</span><br><span class="line">            editor.putLong(key, (Long) obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            editor.putString(key, (String) obj);</span><br><span class="line">        &#125;</span><br><span class="line">        editor.commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取指定数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">get</span><span class="params">(Context context, String key, Object defaultObj)</span> &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        <span class="keyword">if</span> (defaultObj <span class="keyword">instanceof</span> Boolean) &#123;</span><br><span class="line">            <span class="keyword">return</span> sp.getBoolean(key, (Boolean) defaultObj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObj <span class="keyword">instanceof</span> Float) &#123;</span><br><span class="line">            <span class="keyword">return</span> sp.getFloat(key, (Float) defaultObj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">            <span class="keyword">return</span> sp.getInt(key, (Integer) defaultObj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObj <span class="keyword">instanceof</span> Long) &#123;</span><br><span class="line">            <span class="keyword">return</span> sp.getLong(key, (Long) defaultObj);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            <span class="keyword">return</span> sp.getString(key, (String) defaultObj);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除指定数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Context context, String key)</span> &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.<span class="type">Editor</span> <span class="variable">editor</span> <span class="operator">=</span> sp.edit();</span><br><span class="line">        editor.remove(key);</span><br><span class="line">        editor.commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回所有键值对</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, ?&gt; getAll(Context context) &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        Map&lt;String, ?&gt; map = sp.getAll();</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除所有数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.<span class="type">Editor</span> <span class="variable">editor</span> <span class="operator">=</span> sp.edit();</span><br><span class="line">        editor.clear();</span><br><span class="line">        editor.commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检查key对应的数据是否存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Context context, String key)</span> &#123;</span><br><span class="line">        <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> context.getSharedPreferences(FILE_NAME, context.MODE_PRIVATE);</span><br><span class="line">        <span class="keyword">return</span> sp.contains(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><ul>
<li><strong>SQLiteOpenHelper</strong>：抽象类，创建和更新数据库，通过这个类获取SQLiteDatabase实例</li>
<li><strong>SQLiteDatabase</strong>：数据库，在这个类进行数据库操作增删改查，打开关闭<ul>
<li><strong>execSQL</strong>(SQL,Object[]):使用带占位符的SQL语句,这个是执行修改数据库内容的sql语句用的</li>
<li><strong>rawQuery</strong>(SQL,Object[]):使用带占位符的SQL查询操作</li>
</ul>
</li>
<li><strong>Cursor</strong>：指针<ul>
<li><strong>move</strong>(offset):指定向上或者向下移动的行数,整数表示向下移动;负数表示向上移动！</li>
<li><strong>moveToFirst</strong>():指针移动到第一行,成功返回true,也说明有数据</li>
<li><strong>moveToLast</strong>():指针移动到最后一样,成功返回true;</li>
<li><strong>moveToNext</strong>():指针移动到下一行,成功返回true,表明还有元素！</li>
<li><strong>moveToPrevious</strong>():移动到上一条记录</li>
<li><strong>getCount</strong>( )获得总得数据条数</li>
<li><strong>isFirst</strong>():是否为第一条记录</li>
<li><strong>isLast</strong>():是否为最后一项</li>
<li><strong>moveToPosition</strong>(int):移动到指定行</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重写SQLiteOpenHelper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDBOpenHelper</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyDBOpenHelper</span><span class="params">(Context context, String name, CursorFactory factory,</span></span><br><span class="line"><span class="params">            <span class="type">int</span> version)</span> &#123;<span class="built_in">super</span>(context, <span class="string">&quot;my.db&quot;</span>, <span class="literal">null</span>, <span class="number">1</span>); &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//数据库第一次创建时被调用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">        db.execSQL(<span class="string">&quot;CREATE TABLE person(personid INTEGER PRIMARY KEY AUTOINCREMENT,name VARCHAR(20))&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//软件版本号发生改变时调用</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span>(oldVersion)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">              db.execSQL(第一个版本的建表语句);</span><br><span class="line">          <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">              db.execSQL(第二个版本的建表语句);</span><br><span class="line">                db.execSQL(<span class="string">&quot;ALTER TABLE person ADD phone VARCHAR(12) NULL&quot;</span>);</span><br><span class="line">          <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">              db.execSQL(第三个版本的建表语句); </span><br><span class="line">        &#125;            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyDBOpenHelper</span> <span class="variable">myDBHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDBOpenHelper</span>(mContext, <span class="string">&quot;my.db&quot;</span>, <span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line"><span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> myDBHelper.getWritableDatabase();</span><br><span class="line"><span class="comment">// 操作对象方式操作数据库</span></span><br><span class="line"><span class="comment">// 增</span></span><br><span class="line">db.insert(<span class="string">&quot;person&quot;</span>, <span class="literal">null</span>, values1);</span><br><span class="line"><span class="comment">// 查</span></span><br><span class="line"><span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.query(<span class="string">&quot;person&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="comment">// 改</span></span><br><span class="line">db.update(<span class="string">&quot;person&quot;</span>, values2, <span class="string">&quot;name = ?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;呵呵~2&quot;</span>&#125;);</span><br><span class="line"><span class="comment">// 删</span></span><br><span class="line">db.delete(<span class="string">&quot;person&quot;</span>, <span class="string">&quot;personid = ?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;3&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// SQL语句方式操作数据库</span></span><br><span class="line"><span class="comment">// 增删改</span></span><br><span class="line">db.execSQL(<span class="string">&quot;INSERT INTO person(name,phone) values(?,?)&quot;</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;p.getName(),p.getPhone()&#125;);</span><br><span class="line"><span class="comment">// 查</span></span><br><span class="line"><span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span>  db.rawQuery(<span class="string">&quot;SELECT * FROM person WHERE personid = ?&quot;</span>,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;id.toString()&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="第三方"><a href="#第三方" class="headerlink" title="第三方"></a>第三方</h3><ul>
<li><p><a href="https://www.cnblogs.com/renhui/p/11370600.html">greenDao</a></p>
</li>
<li><p><a href="https://github.com/yuweiguocn/GreenDaoUpgradeHelper/blob/master/README_CH.md">数据库迁移工具</a></p>
</li>
</ul>
<h1 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h1><h2 id="补间动画-视图动画"><a href="#补间动画-视图动画" class="headerlink" title="补间动画(视图动画)"></a>补间动画(视图动画)</h2><p>补间动画只改变View的显示效果，响应区域不会改变</p>
<blockquote>
<p>有时候会出现动画完成后View无法隐藏的现象，即setVisibility(View.GONE)失效了，这个时候只要调用view.clearAnimation()清除View动画即可解决此问题。</p>
</blockquote>
<p>动画类</p>
<ul>
<li>**AlphaAnimation：**透明度渐变效果，创建时许指定开始以及结束透明度，还有动画的持续 时间，透明度的变化范围(0,1)，0是完全透明，1是完全不透明；对应&lt;**alpha**&#x2F;&gt;标签！</li>
<li><strong>ScaleAnimation</strong>：缩放渐变效果，创建时需指定开始以及结束的缩放比，以及缩放参考点， 还有动画的持续时间；对应&lt;**scale**&#x2F;&gt;标签！</li>
<li><strong>TranslateAnimation</strong>：位移渐变效果，创建时指定起始以及结束位置，并指定动画的持续 时间即可；对应&lt;**translate**&#x2F;&gt;标签！</li>
<li><strong>RotateAnimation</strong>：旋转渐变效果，创建时指定动画起始以及结束的旋转角度，以及动画 持续时间和旋转的轴心；对应&lt;**rotate**&#x2F;&gt;标签</li>
<li><strong>AnimationSet</strong>：组合渐变，就是前面多种渐变的组合，对应&lt;**set**&#x2F;&gt;标签</li>
<li><strong>LayoutAnimation</strong>：为ViewGroup指定一个动画（android:layoutAnimation），当它的子元素出场时都会具有这种动画效果</li>
</ul>
<p>插值器，控制动画的变化速度</p>
<ul>
<li><strong>LinearInterpolator</strong>：动画以均匀的速度改变</li>
<li><strong>AccelerateInterpolator</strong>：在动画开始的地方改变速度较慢，然后开始加速</li>
<li><strong>AccelerateDecelerateInterpolator</strong>：在动画开始、结束的地方改变速度较慢，中间时加速</li>
<li><strong>CycleInterpolator</strong>：动画循环播放特定次数，变化速度按正弦曲线改变： Math.sin(2 * mCycles * Math.PI * input)</li>
<li><strong>DecelerateInterpolator</strong>：在动画开始的地方改变速度较快，然后开始减速</li>
<li><strong>AnticipateInterpolator</strong>：反向，先向相反方向改变一段再加速播放</li>
<li><strong>AnticipateOvershootInterpolator</strong>：开始的时候向后然后向前甩一定值后返回最后的值</li>
<li><strong>BounceInterpolator</strong>： 跳跃，快到目的值时值会跳跃，如目的值100，后面的值可能依次为85，77，70，80，90，100</li>
<li><strong>OvershottInterpolator</strong>：回弹，最后超出目的值然后缓慢改变到目的值</li>
</ul>
<p>使用：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- shareInterpolator:集合中是否共享补间器，不共享要每个元素单独设置 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- fillAfter:true表示View停留在结束位置，false则不停留 --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:interpolator</span>=<span class="string">&quot;@android:anim/linear_interpolator&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:shareInterpolator</span>=<span class="string">[</span>&quot;<span class="attr">true</span>&quot; | &quot;<span class="attr">false</span>&quot;]</span></span><br><span class="line"><span class="tag">     <span class="attr">android:fillAfter</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">alpha</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromAlpha</span>=<span class="string">&quot;1.0&quot;</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">android:toAlpha</span>=<span class="string">&quot;0.1&quot;</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;2000&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="type">Animation</span> <span class="variable">animation</span> <span class="operator">=</span> AnimationUtils.loadAnimation(<span class="built_in">this</span>, R.anim.anim_alpha);</span><br><span class="line">img_show.startAnimation(animation);</span><br></pre></td></tr></table></figure>

<h3 id="Java代码方式创建动画"><a href="#Java代码方式创建动画" class="headerlink" title="Java代码方式创建动画"></a>Java代码方式创建动画</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startTranslateAnimation</span><span class="params">(View view)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * TranslateAnimation第一种构造</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromXDelta X方向开始的位置，取值类型是float，单位是px像素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toXDelta X方向结束的位置，取值类型是float，单位是px像素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromYDelta Y方向开始的位置，同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toYDelta Y方向结束的位置，同上</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">TranslateAnimation</span> <span class="variable">translateAnimation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TranslateAnimation</span>(<span class="number">0</span>, mIvImg.getWidth() * <span class="number">2</span>, <span class="number">0</span>, mIvImg.getHeight());</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * TranslateAnimation第二种构造 在第一种构造的基础上增加了，移动距离的取值方式，通过Type来约束</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromXType 用来约束pivotXValue的取值。取值有三种：Animation.ABSOLUTE，Animation.RELATIVE_TO_SELF，Animation.RELATIVE_TO_PARENT</span></span><br><span class="line"><span class="comment">     * Type：Animation.ABSOLUTE：绝对，如果设置这种类型，后面pivotXValue取值就必须是像素点；比如：在X方向上移动自己宽度的距离，toXValue的取值是mIvTranslate.getWidth()</span></span><br><span class="line"><span class="comment">     *       Animation.RELATIVE_TO_SELF：相对于控件自己，设置这种类型，后面pivotXValue取值就会去拿这个取值是乘上控件本身的宽度；比如：在X方向上移动自己宽度的距离，toXValue的取值是1.0f</span></span><br><span class="line"><span class="comment">     *       Animation.RELATIVE_TO_PARENT：相对于它父容器（这个父容器是指包括这个这个做动画控件的外一层控件）， 原理同上，</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromXValue 配合fromXType使用，原理在上面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toXType 原理同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toXValue 原理同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromYType 原理同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromYValue 原理同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toYType 原理同上</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toYValue 原理同上</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">TranslateAnimation</span> <span class="variable">translateAnimation1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TranslateAnimation</span>(TranslateAnimation.ABSOLUTE, mIvImg.getWidth(), TranslateAnimation.ABSOLUTE, mIvImg</span><br><span class="line">            .getWidth() * <span class="number">2f</span>, TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0f</span>, TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//设置动画持续时长</span></span><br><span class="line">    translateAnimation1.setDuration(<span class="number">3000</span>);</span><br><span class="line">    <span class="comment">//设置动画结束之后的状态是否是动画的最终状态，true，表示是保持动画结束时的最终状态</span></span><br><span class="line">    translateAnimation1.setFillAfter(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//设置动画结束之后的状态是否是动画开始时的状态，true，表示是保持动画开始时的状态</span></span><br><span class="line">    translateAnimation1.setFillBefore(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//设置动画的重复模式：反转REVERSE和重新开始RESTART</span></span><br><span class="line">    translateAnimation1.setRepeatMode(ScaleAnimation.REVERSE);</span><br><span class="line">    <span class="comment">//设置动画播放次数</span></span><br><span class="line">    translateAnimation1.setRepeatCount(ScaleAnimation.INFINITE);</span><br><span class="line">    <span class="comment">//开始动画</span></span><br><span class="line">    mIvImg.startAnimation(translateAnimation1);</span><br><span class="line">    <span class="comment">//清除动画</span></span><br><span class="line">    mIvImg.clearAnimation();</span><br><span class="line">    <span class="comment">//同样cancel（）也能取消掉动画</span></span><br><span class="line">    translateAnimation1.cancel();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="属性动画"><a href="#属性动画" class="headerlink" title="属性动画"></a>属性动画</h2><p>属性动画是通过不断的修改值来实现，属性动画可以对任何对象做动画</p>
<blockquote>
<p>属性动画要求动画作用的对象提供该属性的get和set方法，且get和set方法能实际改变对象的UI（大小）</p>
</blockquote>
<h3 id="ValueAnimator"><a href="#ValueAnimator" class="headerlink" title="ValueAnimator"></a>ValueAnimator</h3><p>需要在监听中自己修改view的位置或大小等来实现动画，ValueAnimator只负责计算出当前动画进度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 平移动画</span></span><br><span class="line">width = ly_root.getWidth();</span><br><span class="line">height = ly_root.getHeight();</span><br><span class="line"><span class="comment">// 初始化ValueAnimator对象，参数为变化开始值与结束值，支持ofInt()，ofFloat()或ofObject()</span></span><br><span class="line"><span class="type">ValueAnimator</span> <span class="variable">xValue</span> <span class="operator">=</span> ValueAnimator.ofInt(height,<span class="number">0</span>,height / <span class="number">4</span>,height / <span class="number">2</span>,height / <span class="number">4</span> * <span class="number">3</span> ,height);</span><br><span class="line"><span class="comment">// 动画时长</span></span><br><span class="line">xValue.setDuration(<span class="number">3000L</span>);</span><br><span class="line"><span class="comment">// 监听</span></span><br><span class="line">xValue.addUpdateListener(<span class="keyword">new</span> <span class="title class_">ValueAnimator</span>.AnimatorUpdateListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> &#123;</span><br><span class="line">                <span class="comment">// 获取某个时间下的变化值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> (Integer) animation.getAnimatedValue();</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> width / <span class="number">2</span>;</span><br><span class="line">          <span class="comment">// 根据变化值计算对应的位置</span></span><br><span class="line">        moveView(img_babi, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 设置补间器，线性运动</span></span><br><span class="line">xValue.setInterpolator(<span class="keyword">new</span> <span class="title class_">LinearInterpolator</span>());</span><br><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line">xValue.start();</span><br></pre></td></tr></table></figure>

<h3 id="ObjectAnimator"><a href="#ObjectAnimator" class="headerlink" title="ObjectAnimator"></a>ObjectAnimator</h3><p>ValueAnimator的封装，更易用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示隐藏动画做5次</span></span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">animator1</span> <span class="operator">=</span> ObjectAnimator.ofFloat(view, <span class="string">&quot;alpha&quot;</span>, <span class="number">1f</span>, <span class="number">0f</span>, <span class="number">1f</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line">animator1.setDuration(<span class="number">3000l</span>);</span><br><span class="line">animator1.start();</span><br></pre></td></tr></table></figure>

<h3 id="组合动画"><a href="#组合动画" class="headerlink" title="组合动画"></a>组合动画</h3><ul>
<li><strong>after</strong>(Animator anim) 将现有动画插入到传入的动画之后执行</li>
<li><strong>after</strong>(long delay) 将现有动画延迟指定毫秒后执行</li>
<li><strong>before</strong>(Animator anim) 将现有动画插入到传入的动画之前执行</li>
<li><strong>with</strong>(Animator anim) 将现有动画和传入的动画同时执行</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AnimatorSet animSet = new AnimatorSet();</span><br><span class="line">animSet.play(animator4).with(animator3).with(animator2).after(animator1);</span><br><span class="line">animSet.setDuration(5000l);</span><br><span class="line">animSet.start();</span><br></pre></td></tr></table></figure>

<h3 id="xml编写动画"><a href="#xml编写动画" class="headerlink" title="xml编写动画"></a>xml编写动画</h3><p><code>&lt;animator&gt;</code>对应ValueAnimator，<code>&lt;objectAnimator&gt;</code>对应ObjectAnimator</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">android:ordering</span>=<span class="string">&quot;sequentially&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:duration</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:propertyName</span>=<span class="string">&quot;x&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:valueTo</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:valueType</span>=<span class="string">&quot;intType&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">animator</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:duration</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:propertyName</span>=<span class="string">&quot;y&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:valueTo</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:valueType</span>=<span class="string">&quot;intType&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!-- 属性值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:duration</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:valueFrom</span>=<span class="string">&quot;float | int | color&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:valueTo</span>=<span class="string">&quot;float | int | color&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:startOffset</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:repeatCount</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:repeatMode</span>=<span class="string">[</span>&quot;<span class="attr">repeat</span>&quot; | &quot;<span class="attr">reverse</span>&quot;]</span></span><br><span class="line"><span class="tag">       <span class="attr">android:valueType</span>=<span class="string">[</span>&quot;<span class="attr">intType</span>&quot; | &quot;<span class="attr">floatType</span>&quot;]/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>加载动画文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AnimatorSet</span> <span class="variable">set</span> <span class="operator">=</span> (AnimatorSet)AnimatorInflater.loadAnimator(mContext, </span><br><span class="line">             R.animator.property_animator);  </span><br><span class="line">animator.setTarget(view);  </span><br><span class="line">animator.start();  </span><br></pre></td></tr></table></figure>

<h3 id="自定义插值器和估值器"><a href="#自定义插值器和估值器" class="headerlink" title="自定义插值器和估值器"></a>自定义插值器和估值器</h3><p><strong>Evaluator（估值器）</strong></p>
<p>通过<code>ValueAnimator.ofObject</code>实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义动画进度需要实现TypeEvaluator接口重写evaluate方法</span></span><br><span class="line">ValueAnimator.ofObject(TypeEvaluator evaluator, T startValue, T endValue)</span><br><span class="line"></span><br><span class="line"><span class="comment">// fraction：动画的完成度，我们根据他来计算动画的值应该是多少，startValue 和 endValue 表示动画的起始值和结束值。</span></span><br><span class="line">T <span class="title function_">evaluate</span><span class="params">(<span class="type">float</span> fraction, T startValue, T endValue)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>Interpolator（插值器）</strong></p>
<p>实现TimeInterpolator接口，自定义动画进度，范围0-1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> <span class="title function_">getInterpolation</span><span class="params">(<span class="type">float</span> input)</span></span><br></pre></td></tr></table></figure>

<h3 id="动画语法糖"><a href="#动画语法糖" class="headerlink" title="动画语法糖"></a>动画语法糖</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">textview.animate().x(<span class="number">500</span>).y(<span class="number">500</span>).setDuration(<span class="number">5000</span>)  </span><br><span class="line">        .setInterpolator(<span class="keyword">new</span> <span class="title class_">BounceInterpolator</span>());</span><br></pre></td></tr></table></figure>

<h1 id="新特性"><a href="#新特性" class="headerlink" title="新特性"></a>新特性</h1><h2 id="Jetpack"><a href="#Jetpack" class="headerlink" title="Jetpack"></a>Jetpack</h2><p>Jetpack 是一套组件库。 是由 85 个组件库构成的，比如：<strong>viewPager、fragment、recyclerview 等等</strong></p>
<p><a href="https://zhuanlan.zhihu.com/p/334350927">Jetpack 是什么？</a></p>
<h2 id="DataBinding（mvvm数据绑定模式）"><a href="#DataBinding（mvvm数据绑定模式）" class="headerlink" title="DataBinding（mvvm数据绑定模式）"></a>DataBinding（mvvm数据绑定模式）</h2><ol>
<li>需要再<strong>build.gradle</strong>添加：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    dataBinding &#123;</span><br><span class="line">        enabled = true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在cell的xml中最外层用<layout>包裹后可以声明<data>标签，将数据跟cell绑定，数据加工转给entity处理</li>
</ol>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/" rel="prev" title="Android学习笔记2">
      <i class="fa fa-chevron-left"></i> Android学习笔记2
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/03/25/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/" rel="next" title="Android学习笔记3">
      Android学习笔记3 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Gradle"><span class="nav-number">1.</span> <span class="nav-text">Gradle</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84gradle"><span class="nav-number">1.1.</span> <span class="nav-text">安卓中的gradle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transform"><span class="nav-number">1.2.</span> <span class="nav-text">Transform</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8"><span class="nav-number">2.</span> <span class="nav-text">本地存储</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-number">2.1.</span> <span class="nav-text">基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%96%87%E6%A1%A3%E5%92%8C%E5%85%B6%E5%AE%83%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="nav-number">2.1.0.0.1.</span> <span class="nav-text">访问文档和其它文件：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%AD%98%E5%8F%96"><span class="nav-number">2.2.</span> <span class="nav-text">文件存取</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99app%E6%B2%99%E7%9B%92%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.1.</span> <span class="nav-text">读写app沙盒文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99SD%E5%8D%A1%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.2.</span> <span class="nav-text">读写SD卡文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96raw%E5%92%8Cassets%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.3.</span> <span class="nav-text">读取raw和assets文件夹下的文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%81%8F%E5%A5%BD"><span class="nav-number">2.3.</span> <span class="nav-text">用户偏好</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.4.</span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9"><span class="nav-number">2.4.1.</span> <span class="nav-text">第三方</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB"><span class="nav-number">3.</span> <span class="nav-text">动画</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB-%E8%A7%86%E5%9B%BE%E5%8A%A8%E7%94%BB"><span class="nav-number">3.1.</span> <span class="nav-text">补间动画(视图动画)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E5%8A%A8%E7%94%BB"><span class="nav-number">3.1.1.</span> <span class="nav-text">Java代码方式创建动画</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB"><span class="nav-number">3.2.</span> <span class="nav-text">属性动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ValueAnimator"><span class="nav-number">3.2.1.</span> <span class="nav-text">ValueAnimator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ObjectAnimator"><span class="nav-number">3.2.2.</span> <span class="nav-text">ObjectAnimator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%8A%A8%E7%94%BB"><span class="nav-number">3.2.3.</span> <span class="nav-text">组合动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml%E7%BC%96%E5%86%99%E5%8A%A8%E7%94%BB"><span class="nav-number">3.2.4.</span> <span class="nav-text">xml编写动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E5%80%BC%E5%99%A8%E5%92%8C%E4%BC%B0%E5%80%BC%E5%99%A8"><span class="nav-number">3.2.5.</span> <span class="nav-text">自定义插值器和估值器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-number">3.2.6.</span> <span class="nav-text">动画语法糖</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">4.</span> <span class="nav-text">新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Jetpack"><span class="nav-number">4.1.</span> <span class="nav-text">Jetpack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DataBinding%EF%BC%88mvvm%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="nav-number">4.2.</span> <span class="nav-text">DataBinding（mvvm数据绑定模式）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">5.</span> <span class="nav-text"></span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="火箭快餐"
      src="/uploads/avatar.jpeg">
  <p class="site-author-name" itemprop="name">火箭快餐</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">火箭快餐</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
